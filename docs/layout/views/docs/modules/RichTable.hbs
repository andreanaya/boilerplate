<h1>{{title}}</h1>

<div class="constrain">
	{{#table}}
	<div class="rich-table" data-component="rich-table">
		<form class="rich-table__form" action="/docs/rich-table" method="GET" enctype='application/json' id="rich-table"></form>
		<table class="rich-table__table">
			<thead class="rich-table__header">
				<tr class="rich-table__header-row">
					{{#header}}
						<th class="rich-table__header-column" data-key="{{key}}">
							<fieldset class="rich-table__header-filter" form="rich-table">
								<legend class="rich-table__header-label">{{label}}</legend>
								
								<select class="rich-table__header-filter" name="filter[{{key}}][]" multiple size="{{options.length}}">
									{{#options}}
										{{#contains (lookup @root.query.filter ../key) value}}
											<option class="rich-table__header-option" value="{{value}}" selected>{{label}}</option>
										{{else}}
											<option class="rich-table__header-option" value="{{value}}">{{label}}</option>
										{{/contains}}
									{{/options}}
								</select>

								<button type="submit" form="rich-table" name="sort[{{key}}]" value="true">Acending</button>
								<button type="submit" form="rich-table" name="sort[{{key}}]" value="false">Descending</button>
							</fieldset>
						</th>
					{{/header}}
				</tr>
			</thead>
			<tbody class="rich-table__body" {{#@root.query.sort}}data-sort="{{object this}}"{{/@root.query.sort}}>
				{{#sort body @root.query.sort}}
					<tr class="rich-table__body-row {{^filter @root.query.filter}}is-hidden{{/filter}}" data-row>
						<td data-col data-key="id" data-value="{{id}}">{{id}}</td>
						<td data-col data-key="name" data-value="{{name}}">{{name}}</td>
						<td data-col data-key="color" data-value="{{color}}">{{color}}</td>
					</tr>
				{{/sort}}
			</tbody>
		</table>
	</div>
	{{/table}}
</div>
